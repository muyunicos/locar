<?php
// Función auxiliar para renderizar un producto.
function render_producto($item) {
    // Si el item está oculto, no hacer nada.
    if (isset($item['hidden']) && $item['hidden']) {
        return;
    }
    // ... (el resto del código de la función render_producto es igual)
    // ...
}

// Dentro del bucle principal
foreach ($categorias as $categoria):
    // Si la categoría entera está oculta, saltarla junto con todos sus ítems.
    if (isset($categoria['hidden']) && $categoria['hidden']) {
        continue;
    }
?>
    <div class="categoria-container">
        </div>
<?php endforeach; ?>